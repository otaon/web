---
title: "Go言語入門(変数定義・変数への代入)"
date:    2019-04-13T06:00:00+09:00
lastmod: 2019-04-13T06:00:00+09:00
draft: false
toc: true
tags: ["Go", "Golang"]
categories: ["Go"]
authors:
- otaon
---

# 目的
Go言語の基本構文を残す。

# 参考文献
- [スターティング Go言語](https://www.shoeisha.co.jp/book/detail/9784798142418)

# 基本構文
## 変数定義・変数への代入
### 明示的な変数定義
明示的な変数定義の方法を示す。  
見て分かるとおり、`var 変数名　型名`の順番で定義する。  
また、複数の変数定義をまとめて行えるようになっている。

```go
// 明示的な定義
var a int

// int型の変数x, y, zをまとめて定義する
var x, y, z int

// 異なる型の変数x, y, nameをまとめて定義する
var (
	x, y int
	name string
)
```

### 代入
定義した変数に値を代入する方法は下記の通り。  
代入も、複数個の変数にまとめて代入する構文が用意されている。

```go
// 変数への代入
a = 5

// 複数個の変数に複数個の値をまとめて代入する
x, y = 1, 2

// Error: 異なる個数の代入はコンパイルエラーとなる
x, y, z = 1, 2
```

### 暗黙的な定義(推奨)
演算子`:=`を使用することで、型指定なしで変数が定期可能。  
この場合、右辺に記述した式の型が、左辺の変数の型として推論される。  
可能な限り、この方法での変数定義をすること。

```go
i := 3	// int型の変数iに整数3を代入する
b := true	// bool型の変数bに真偽値trueを代入する
f := 3.14	// float64型の変数fに実数3.14を代入する
s := "abc"	// string型の変数sに文字列"abc"を代入する

func one() int {
	return 1
}
n := one()	// int型の変数nに整数1を代入する
```

**NOTE**  
明示的な定義、暗黙的な定義は、当然ながら同一の変数に対しては**ただ1回のみ**使用できる。  
2回目以降の定義の箇所でコンパイルエラーとなる。

**NOTE**  
`var a = 1`と記述することで、変則的だが`var`を使った暗黙的な定義も可能。  
しかし、簡潔さの観点から`:=`のほうが好ましい。

### 変数のスコープ
Goにおける変数は、定義位置により2種類に分かれる。

ローカル変数
: 関数定義の中に定義された変数。  
同一のパッケージ変数がある場合、そのパッケージ変数をシャドウイングする(C言語と同様)。

パッケージ変数
: 関数定義の外に定義された変数。  
パッケージ変数は、プログラム全体で1つの値が共有される(C言語のグローバル変数と同様)。

### 未参照の変数はコンパイルエラーとなる
Goでは、定義済みであるにも関わらず、何からも参照されていない変数があったらコンパイルエラーとなる。
煩わしい場合もあるが、誤った変数の使用を防ぐために存在する機能と考えるべき。
